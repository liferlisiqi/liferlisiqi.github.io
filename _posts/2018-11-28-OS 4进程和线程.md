---
layout:     post
title:      OS 4进程和线程        
date:       2018-11-28   
author:     lsq    
header-img: img/post-bg-coffee.jpeg
catalog: true
tags:
    - OS
---

# 1 进程
进程是现代分时操作系统的工作单元，系统由一组进程组成，操作系统进程执行系统代码而用户系统执行用户代码。粗略地说，进程是执行中的程序，进程不只是程序代码，有时也成为文本段（代码段）。进程还包括当前活动，通过程序计数器和处理器寄存器的内容表示。另外，进程通常还包括进程堆栈段和数据段。如下图所示。

![](https://raw.githubusercontent.com/liferlisiqi/liferlisiqi.github.io/master/img/2018-11-28-os13.jpg)

进程在执行时会改变状态，每个进程可能会处于下列状态之一。一次只能有一个进程可以在一个处理器上运行，但是多个进程可处于就绪或等待状态。如下图所示，该模型成为三状态（就绪、运行、等待）进程模型。

- 创建：进程正在被创建
- **就绪**：进程等待分配处理器
- **运行**：指令正在被执行
- **等待（或阻塞）**：进程等待某个事件的发生
- 终止：进程完成执行

![](https://raw.githubusercontent.com/liferlisiqi/liferlisiqi.github.io/master/img/2018-11-28-os14.jpg)

每个进程在操作系统内用`进程控制块`（process control block， PCB）来表示，如下图所示。PCB是进程存在的唯一标志，进程创建是生成PCB，进程终止时回收PCB，PCB的生命周期与进程一致。

![](https://raw.githubusercontent.com/liferlisiqi/liferlisiqi.github.io/master/img/2018-11-28-os15.jpg)

- 进程状态：包括创建、就绪、运行、等待、停止等。
- 进程编号
- 程序计数器：表示进程要执行的下个指令的地址
- CPU寄存器：包括累加器、索引寄存器、堆栈指针等，和程序计数器一起，需要在出现中断时保存，以便进程以后能够正确地继续执行
- CPU调度信息：包括进程优先级、调度队列的指针和其他调度参数。
- 内存管理信息：包括基址和界限寄存器的值、页表或段表

CPU在进程间切换的过程如下图所示。

![](https://raw.githubusercontent.com/liferlisiqi/liferlisiqi.github.io/master/img/2018-11-28-os16.jpg)

# 2 线程







## Reference
操作系统概念    
[操作系统-清华大学](http://os.cs.tsinghua.edu.cn/oscourse/OS2017spring)  
[Operation system: three easy piece](http://pages.cs.wisc.edu/~remzi/OSTEP/) 
